/*!
 * PaoQitan.js v1.0.0
 * Copyright (c) iQIYI.com 2018-2021 zhanghao caoxue
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.PaoQitan={})}(this,function(t){"use strict";var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function r(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function i(e,a,c,u){return new(c||(c=Promise))(function(t,n){function o(t){try{i(u.next(t))}catch(e){n(e)}}function r(t){try{i(u["throw"](t))}catch(e){n(e)}}function i(e){e.done?t(e.value):new c(function(t){t(e.value)}).then(o,r)}i((u=u.apply(e,a||[])).next())})}function c(o,r){var i,a,c,t,u={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return t={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function n(t){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,a&&(c=2&t[0]?a["return"]:t[0]?a["throw"]||((c=a["return"])&&c.call(a),0):a.next)&&!(c=c.call(a,t[1])).done)return c;switch(a=0,c&&(t=[2&t[0],c.value]),t[0]){case 0:case 1:c=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(c=0<(c=u.trys).length&&c[c.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!c||t[1]>c[0]&&t[1]<c[3])){u.label=t[1];break}if(6===t[0]&&u.label<c[1]){u.label=c[1],c=t;break}if(c&&u.label<c[2]){u.label=c[2],u.ops.push(t);break}c[2]&&u.ops.pop(),u.trys.pop();continue}t=r.call(o,u)}catch(e){t=[6,e],a=0}finally{i=c=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([e,t])}}}"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function e(t,e){return t(e={exports:{}},e.exports),e.exports}var m=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),v=e(function(t){var e=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)}),u=(v.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),a=function(t){if(!u(t))throw TypeError(t+" is not an object!");return t},s=function(t){try{return!!t()}catch(e){return!0}},n=!s(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),l=m.document,f=u(l)&&u(l.createElement),d=function(t){return f?l.createElement(t):{}},p=!n&&!s(function(){return 7!=Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a}),h=function(t,e){if(!u(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!u(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!u(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!u(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")},y=Object.defineProperty,g={f:n?Object.defineProperty:function(t,e,n){if(a(t),e=h(e,!0),a(n),p)try{return y(t,e,n)}catch(o){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},b=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},w=n?function(t,e,n){return g.f(t,e,b(1,n))}:function(t,e,n){return t[e]=n,t},_=function(t,e){try{return{}.hasOwnProperty.call(t,e)}catch(n){}},I=0,E=Math.random(),P=function(t){return"Symbol(".concat(t===undefined?"":t,")_",(++I+E).toString(36))},S=e(function(t){var i=P("src"),e="toString",n=Function[e],a=(""+n).split(e);v.inspectSource=function(t){return n.call(t)},(t.exports=function(t,e,n,o){var r="function"==typeof n;r&&(_(n,"name")||w(n,"name",e)),t[e]!==n&&(r&&(_(n,i)||w(n,i,t[e]?""+t[e]:a.join(String(e)))),t===m?t[e]=n:o?t[e]?t[e]=n:w(t,e,n):(delete t[e],w(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[i]||n.call(this)})}),O=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},x=function(o,r,t){if(O(o),r===undefined)return o;switch(t){case 1:return function(t){return o.call(r,t)};case 2:return function(t,e){return o.call(r,t,e)};case 3:return function(t,e,n){return o.call(r,t,e,n)}}return function(){return o.apply(r,arguments)}},j="prototype",A=function(t,e,n){var o,r,i,a,c=t&A.F,u=t&A.G,s=t&A.S,l=t&A.P,f=t&A.B,d=u?m:s?m[e]||(m[e]={}):(m[e]||{})[j],p=u?v:v[e]||(v[e]={}),h=p[j]||(p[j]={});for(o in u&&(n=e),n)i=((r=!c&&d&&d[o]!==undefined)?d:n)[o],a=f&&r?x(i,m):l&&"function"==typeof i?x(Function.call,i):i,d&&S(d,o,i,t&A.U),p[o]!=i&&w(p,o,a),l&&h[o]!=i&&(h[o]=i)};m.core=v,A.F=1,A.G=2,A.S=4,A.P=8,A.B=16,A.W=32,A.U=64,A.R=128;var k=A,C={}.toString,T=function(t){return C.call(t).slice(8,-1)},q=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==T(t)?t.split(""):Object(t)},F=function(t){if(t==undefined)throw TypeError("Can't call method on  "+t);return t},R=function(t){return q(F(t))},N=Math.ceil,W=Math.floor,$=function(t){return isNaN(t=+t)?0:(0<t?W:N)(t)},D=Math.min,M=function(t){return 0<t?D($(t),9007199254740991):0},L=Math.max,B=Math.min,U=function(t,e){return(t=$(t))<0?L(t+e,0):B(t,e)},H=function(c){return function(t,e,n){var o,r=R(t),i=M(r.length),a=U(n,i);if(c&&e!=e){for(;a<i;)if((o=r[a++])!=o)return!0}else for(;a<i;a++)if((c||a in r)&&r[a]===e)return c||a||0;return!c&&-1}},J=e(function(t){var e="__core-js_shared__",n=m[e]||(m[e]={});(t.exports=function(t,e){return n[t]||(n[t]=e!==undefined?e:{})})("versions",[]).push({version:v.version,mode:"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})}),V=J("keys"),X=function(t){return V[t]||(V[t]=P(t))},z=H(!1),Y=X("IE_PROTO"),G=function(t,e){var n,o=R(t),r=0,i=[];for(n in o)n!=Y&&_(o,n)&&i.push(n);for(;e.length>r;)_(o,n=e[r++])&&(~z(i,n)||i.push(n));return i},K="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Z=Object.keys||function tn(t){return G(t,K)},tt=n?Object.defineProperties:function(t,e){a(t);for(var n,o=Z(e),r=o.length,i=0;i<r;)g.f(t,n=o[i++],e[n]);return t},et=m.document,nt=et&&et.documentElement,ot=X("IE_PROTO"),rt=function(){},it="prototype",at=function(){var t,e=d("iframe"),n=K.length;for(e.style.display="none",nt.appendChild(e),document.domain&&document.domain!=location.hostname?e.src="javascript:void(function(){document.open();document.domain='"+document.domain+"';document.write('');document.close();}())":e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),at=t.F;n--;)delete at[it][K[n]];return at()},ct=Object.create||function or(t,e){var n;return null!==t?(rt[it]=a(t),n=new rt,rt[it]=null,n[ot]=t):n=at(),e===undefined?n:tt(n,e)};k(k.S,"Object",{create:ct}),k(k.S+k.F*!n,"Object",{defineProperty:g.f}),k(k.S+k.F*!n,"Object",{defineProperties:tt});var ut={f:{}.propertyIsEnumerable},st=Object.getOwnPropertyDescriptor,lt=function(t,e){var n=(v.Object||{})[t]||Object[t],o={};o[t]=e(n),k(k.S+k.F*s(function(){n(1)}),"Object",o)},ft={f:n?st:function(t,e){if(t=R(t),e=h(e,!0),p)try{return st(t,e)}catch(n){}if(_(t,e))return b(!ut.f.call(t,e),t[e])}}.f;lt("getOwnPropertyDescriptor",function(){return function(t,e){return ft(R(t),e)}});var dt=function(t){return Object(F(t))},pt=X("IE_PROTO"),ht=Object.prototype,mt=Object.getPrototypeOf||function(t){return t=dt(t),_(t,pt)?t[pt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ht:null};lt("getPrototypeOf",function(){return function(t){return mt(dt(t))}}),lt("keys",function(){return function(t){return Z(dt(t))}});var vt=K.concat("length","prototype"),yt={f:Object.getOwnPropertyNames||function(t){return G(t,vt)}}.f,gt={}.toString,bt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],wt=function(t){return bt&&"[object Window]"==gt.call(t)?function(t){try{return yt(t)}catch(e){return bt.slice()}}(t):yt(R(t))};lt("getOwnPropertyNames",function(){return wt});var _t=e(function(t){var n=P("meta"),e=g.f,o=0,r=Object.isExtensible||function(){return!0},i=!s(function(){return r(Object.preventExtensions({}))}),a=function(t){e(t,n,{value:{i:"O"+ ++o,w:{}}})},c=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!u(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!_(t,n)){if(!r(t))return"F";if(!e)return"E";a(t)}return t[n].i},getWeak:function(t,e){if(!_(t,n)){if(!r(t))return!0;if(!e)return!1;a(t)}return t[n].w},onFreeze:function(t){return i&&c.NEED&&r(t)&&!_(t,n)&&a(t),t}}}),It=(_t.KEY,_t.NEED,_t.fastKey,_t.getWeak,_t.onFreeze,_t.onFreeze);lt("freeze",function(e){return function(t){return e&&u(t)?e(It(t)):t}});var Et=_t.onFreeze;lt("seal",function(e){return function(t){return e&&u(t)?e(Et(t)):t}});var Pt=_t.onFreeze;lt("preventExtensions",function(e){return function(t){return e&&u(t)?e(Pt(t)):t}}),lt("isFrozen",function(e){return function(t){return!u(t)||!!e&&e(t)}}),lt("isSealed",function(e){return function(t){return!u(t)||!!e&&e(t)}}),lt("isExtensible",function(e){return function(t){return!!u(t)&&(!e||e(t))}});var St=[].slice,Ot={},xt=Function.bind||function Ce(e){var n=O(this),o=St.call(arguments,1),r=function(){var t=o.concat(St.call(arguments));return this instanceof r?function(t,e,n){if(!(e in Ot)){for(var o=[],r=0;r<e;r++)o[r]="a["+r+"]";Ot[e]=Function("F,a","return new F("+o.join(",")+")")}return Ot[e](t,n)}(n,t.length,t):function(t,e,n){var o=n===undefined;switch(e.length){case 0:return o?t():t.call(n);case 1:return o?t(e[0]):t.call(n,e[0]);case 2:return o?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return o?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return o?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}(n,t,e)};return u(n.prototype)&&(r.prototype=n.prototype),r};k(k.P,"Function",{bind:xt});var jt=Array.isArray||function Qe(t){return"Array"==T(t)};k(k.S,"Array",{isArray:jt});var At=function(t,e){return!!t&&s(function(){e?t.call(null,function(){},1):t.call(null)})},kt=[].join;k(k.P+k.F*(q!=Object||!At(kt)),"Array",{join:function(t){return kt.call(R(this),t===undefined?",":t)}});var Ct=[].slice;k(k.P+k.F*s(function(){nt&&Ct.call(nt)}),"Array",{slice:function ze(t,e){var n=M(this.length),o=T(this);if(e=e===undefined?n:e,"Array"==o)return Ct.call(this,t,e);for(var r=U(t,n),i=U(e,n),a=M(i-r),c=new Array(a),u=0;u<a;u++)c[u]="String"==o?this.charAt(r+u):this[r+u];return c}});var Tt=[].sort,qt=[1,2,3];k(k.P+k.F*(s(function(){qt.sort(undefined)})||!s(function(){qt.sort(null)})||!At(Tt)),"Array",{sort:function(t){return t===undefined?Tt.call(dt(this)):Tt.call(dt(this),O(t))}});var Ft=e(function(t){var e=J("wks"),n=m.Symbol,o="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=o&&n[t]||(o?n:P)("Symbol."+t))}).store=e})("species"),Rt=function(t,e){return jt(n=t)&&("function"!=typeof(o=n.constructor)||o!==Array&&!jt(o.prototype)||(o=undefined),u(o)&&null===(o=o[Ft])&&(o=undefined)),new(o===undefined?Array:o)(e);var n,o},Nt=function(f,t){var d=1==f,p=2==f,h=3==f,m=4==f,v=6==f,y=5==f||v,g=t||Rt;return function(t,e,n){for(var o,r,i=dt(t),a=q(i),c=x(e,n,3),u=M(a.length),s=0,l=d?g(t,u):p?g(t,0):undefined;s<u;s++)if((y||s in a)&&(r=c(o=a[s],s,i),f))if(d)l[s]=r;else if(r)switch(f){case 3:return!0;case 5:return o;case 6:return s;case 2:l.push(o)}else if(m)return!1;return v?-1:h||m?m:l}},Wt=Nt(0),$t=At([].forEach,!0);k(k.P+k.F*!$t,"Array",{forEach:function(t){return Wt(this,t,arguments[1])}});var Dt=Nt(1);k(k.P+k.F*!At([].map,!0),"Array",{map:function kn(t){return Dt(this,t,arguments[1])}});var Mt=Nt(2);k(k.P+k.F*!At([].filter,!0),"Array",{filter:function Xe(t){return Mt(this,t,arguments[1])}});var Qt=Nt(3);k(k.P+k.F*!At([].some,!0),"Array",{some:function(t){return Qt(this,t,arguments[1])}});var Lt=Nt(4);k(k.P+k.F*!At([].every,!0),"Array",{every:function(t){return Lt(this,t,arguments[1])}});var Bt=function(t,e,n,o,r){O(e);var i=dt(t),a=q(i),c=M(i.length),u=r?c-1:0,s=r?-1:1;if(n<2)for(;;){if(u in a){o=a[u],u+=s;break}if(u+=s,r?u<0:c<=u)throw TypeError("Reduce of empty array with no initial value")}for(;r?0<=u:u<c;u+=s)u in a&&(o=e(o,a[u],u,i));return o};k(k.P+k.F*!At([].reduce,!0),"Array",{reduce:function(t){return Bt(this,t,arguments.length,arguments[1],!1)}}),k(k.P+k.F*!At([].reduceRight,!0),"Array",{reduceRight:function(t){return Bt(this,t,arguments.length,arguments[1],!0)}});var Ut=H(!1),Ht=[].indexOf,Jt=!!Ht&&1/[1].indexOf(1,-0)<0;k(k.P+k.F*(Jt||!At(Ht)),"Array",{indexOf:function(t){return Jt?Ht.apply(this,arguments)||0:Ut(this,t,arguments[1])}});var Vt=[].lastIndexOf,Xt=!!Vt&&1/[1].lastIndexOf(1,-0)<0;k(k.P+k.F*(Xt||!At(Vt)),"Array",{lastIndexOf:function(t){if(Xt)return Vt.apply(this,arguments)||0;var e=R(this),n=M(e.length),o=n-1;for(1<arguments.length&&(o=Math.min(o,$(arguments[1]))),o<0&&(o=n+o);0<=o;o--)if(o in e&&e[o]===t)return o||0;return-1}});var zt=function(t,e){if("number"!=typeof t&&"Number"!=T(t))throw TypeError(e);return+t},Yt=function(t){var e=String(F(this)),n="",o=$(t);if(o<0||o==Infinity)throw RangeError("Count can't be negative");for(;0<o;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n},Gt=1..toFixed,Kt=Math.floor,Zt=[0,0,0,0,0,0],te="Number.toFixed: incorrect invocation!",ee=function(t,e){for(var n=-1,o=e;++n<6;)o+=t*Zt[n],Zt[n]=o%1e7,o=Kt(o/1e7)},ne=function(t){for(var e=6,n=0;0<=--e;)n+=Zt[e],Zt[e]=Kt(n/t),n=n%t*1e7},oe=function(){for(var t=6,e="";0<=--t;)if(""!==e||0===t||0!==Zt[t]){var n=String(Zt[t]);e=""===e?n:e+Yt.call("0",7-n.length)+n}return e},re=function(t,e,n){return 0===e?n:e%2==1?re(t,e-1,n*t):re(t*t,e/2,n)};k(k.P+k.F*(!!Gt&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s(function(){Gt.call({})})),"Number",{toFixed:function(t){var e,n,o,r,i=zt(this,te),a=$(t),c="",u="0";if(a<0||20<a)throw RangeError(te);if(i!=i)return"NaN";if(i<=-1e21||1e21<=i)return String(i);if(i<0&&(c="-",i=-i),1e-21<i)if(n=(e=function(t){for(var e=0,n=t;4096<=n;)e+=12,n/=4096;for(;2<=n;)e+=1,n/=2;return e}(i*re(2,69,1))-69)<0?i*re(2,-e,1):i/re(2,e,1),n*=4503599627370496,0<(e=52-e)){for(ee(0,n),o=a;7<=o;)ee(1e7,0),o-=7;for(ee(re(10,o,1),0),o=e-1;23<=o;)ne(1<<23),o-=23;ne(1<<o),ee(1,1),ne(2),u=oe()}else ee(0,n),ee(1<<-e,0),u=oe()+Yt.call("0",a);return u=0<a?c+((r=u.length)<=a?"0."+Yt.call("0",a-r)+u:u.slice(0,r-a)+"."+u.slice(r-a)):c+u}});var ie=1..toPrecision;k(k.P+k.F*(s(function(){return"1"!==ie.call(1,undefined)})||!s(function(){ie.call({})})),"Number",{toPrecision:function(t){var e=zt(this,"Number#toPrecision: incorrect invocation!");return t===undefined?ie.call(e):ie.call(e,t)}}),k(k.S,"Date",{now:function(){return(new Date).getTime()}});var ae=Date.prototype.getTime,ce=Date.prototype.toISOString,ue=function(t){return 9<t?t:"0"+t},se=s(function(){return"0385-07-25T07:06:39.999Z"!=ce.call(new Date(-5e13-1))})||!s(function(){ce.call(new Date(NaN))})?function(){if(!isFinite(ae.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),o=e<0?"-":9999<e?"+":"";return o+("00000"+Math.abs(e)).slice(o?-6:-4)+"-"+ue(t.getUTCMonth()+1)+"-"+ue(t.getUTCDate())+"T"+ue(t.getUTCHours())+":"+ue(t.getUTCMinutes())+":"+ue(t.getUTCSeconds())+"."+(99<n?n:"0"+ue(n))+"Z"}:ce;k(k.P+k.F*(Date.prototype.toISOString!==se),"Date",{toISOString:se}),k(k.P+k.F*s(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=dt(this),n=h(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}});var le="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",fe="["+le+"]",de=RegExp("^"+fe+fe+"*"),pe=RegExp(fe+fe+"*$"),he=function(t,e,n){var o={},r=s(function(){return!!le[t]()||"​"!="​"[t]()}),i=o[t]=r?e(me):le[t];n&&(o[n]=i),k(k.P+k.F*r,"String",o)},me=he.trim=function(t,e){return t=String(F(t)),1&e&&(t=t.replace(de,"")),2&e&&(t=t.replace(pe,"")),t},ve=he,ye=m.parseInt,ge=ve.trim,be=/^[-+]?0[xX]/,we=8!==ye(le+"08")||22!==ye(le+"0x16")?function(t,e){var n=ge(String(t),3);return ye(n,e>>>0||(be.test(n)?16:10))}:ye;k(k.G+k.F*(parseInt!=we),{parseInt:we});var _e=m.parseFloat,Ie=ve.trim,Ee=1/_e(le+"-0")!=-Infinity?function(t){var e=Ie(String(t),3),n=_e(e);return 0===n&&"-"==e.charAt(0)?-0:n}:_e;k(k.G+k.F*(parseFloat!=Ee),{parseFloat:Ee}),ve("trim",function(t){return function(){return t(this,3)}});var Pe=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};n&&"g"!=/./g.flags&&g.f(RegExp.prototype,"flags",{configurable:!0,get:Pe});var Se="toString",Oe=/./[Se],xe=function(t){S(RegExp.prototype,Se,t,!0)};function je(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})}s(function(){return"/a/b"!=Oe.call({source:"a",flags:"b"})})?xe(function C(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!n&&t instanceof RegExp?Pe.call(t):undefined)}):Oe.name!=Se&&xe(function C(){return Oe.call(this)});var Ae=setTimeout;function ke(){}function Ce(t,e){return function(){t.apply(e,arguments)}}function Te(t){if(!(this instanceof Te))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],$e(t,this)}function qe(o,r){for(;3===o._state;)o=o._value;0!==o._state?(o._handled=!0,Te._immediateFn(function(){var t=1===o._state?r.onFulfilled:r.onRejected;if(null!==t){var e;try{e=t(o._value)}catch(n){return void Re(r.promise,n)}Fe(r.promise,e)}else(1===o._state?Fe:Re)(r.promise,o._value)})):o._deferreds.push(r)}function Fe(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof Te)return t._state=3,t._value=e,void Ne(t);if("function"==typeof n)return void $e(Ce(n,e),t)}t._state=1,t._value=e,Ne(t)}catch(o){Re(t,o)}}function Re(t,e){t._state=2,t._value=e,Ne(t)}function Ne(t){2===t._state&&0===t._deferreds.length&&Te._immediateFn(function(){t._handled||Te._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)qe(t,t._deferreds[e]);t._deferreds=null}function We(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function $e(t,e){var n=!1;try{t(function(t){n||(n=!0,Fe(e,t))},function(t){n||(n=!0,Re(e,t))})}catch(o){if(n)return;n=!0,Re(e,o)}}Te.prototype["catch"]=function(t){return this.then(null,t)},Te.prototype.then=function(t,e){var n=new this.constructor(ke);return qe(this,new We(t,e,n)),n},Te.prototype["finally"]=je,Te.all=function(e){return new Te(function(r,i){if(!e||"undefined"==typeof e.length)throw new TypeError("Promise.all accepts an array");var a=Array.prototype.slice.call(e);if(0===a.length)return r([]);var c=a.length;function u(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){u(e,t)},i)}a[e]=t,0==--c&&r(a)}catch(o){i(o)}}for(var t=0;t<a.length;t++)u(t,a[t])})},Te.resolve=function(e){return e&&"object"==typeof e&&e.constructor===Te?e:new Te(function(t){t(e)})},Te.reject=function(n){return new Te(function(t,e){e(n)})},Te.race=function(r){return new Te(function(t,e){for(var n=0,o=r.length;n<o;n++)r[n].then(t,e)})},Te._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){Ae(t,0)},Te._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console};var De=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"Promise"in De?De.Promise.prototype["finally"]||(De.Promise.prototype["finally"]=je):De.Promise=Te;var Me=Object.prototype.toString;function Qe(t){return"[object Array]"===Me.call(t)}function Le(t){return Qe(t)||function e(t){return/\[object Int|Uint|Float\d+Array\]/.test(Me.call(t))}(t)||Ue(t)}function Be(t){return"[object Function]"===Me.call(t)}function Ue(t){return"[object String]"===Me.call(t)}function He(t){return t}function Je(t){return Be(t)?t:He}function Ve(t,e){if(void 0===e&&(e=He),Le(t))for(var n=t.length,o=-1;++o<n&&!1!==e(t[o],o,t););return t}function Xe(t,o){o=Je(o);var r=[];return Ve(t,function(t,e,n){o(t,e,n)&&r.push(t)}),r}function ze(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Array.prototype.slice.apply(Ye(t),e)}function Ye(t){return Qe(t)&&Ve(t,function(t,e,n){n[e]=t}),t}var Ge=Object.prototype.hasOwnProperty;function Ke(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];n=Object(n);for(var o=0,r=t;o<r.length;o++){Ze(r[o],function(t,e){n[e]=t})}return n}function Ze(e,n){return void 0===n&&(n=He),Ve(tn(e=Object(e)),function(t){return n(e[t],t,e)}),e}function tn(t){var e=[];for(var n in t=Object(t))Ge.call(t,n)&&e.push(n);return e}function en(t){return t=null==t?{}:Object(t),0===Object.keys(t).length}var nn={ERROR:"red",WARN:"#f0bd06",INFO:"blue",PREFIX:"#00be06",LOG:"#333"},on={ERROR:"ERROR",WARN:"WARN",INFO:"INFO",PREFIX:"PREFIX",LOG:"LOG"},rn=function(){function t(t){void 0===t&&(t={}),this._options=t,this._prefix=t.prefix||"IQIYI_SDK",this._colors=Ke({},t.colors,nn),this._status=Ke({},t.status,on)}return t.prototype.error=function(t,e){void 0===t&&(t=""),this._print(t,"error")},t.prototype.info=function(t,e){void 0===t&&(t=""),this._print(t,"info")},t.prototype.warn=function(t,e){void 0===t&&(t=""),this._print(t,"warn")},t.prototype.log=function(t,e){void 0===t&&(t=""),this._print(t,"log")},t.prototype._print=function(t,e){void 0===t&&(t=""),void 0===e&&(e=""),t=function n(t){return Object(t)===t}(t)?JSON.stringify(t):t,e=Ue(e=String(e).toUpperCase())&&e.valueOf()&&this._status[e]&&this._colors[e]?e:"LOG";this._colors.PREFIX,this._colors[e];(e===this._status.ERROR||e===this._status.WARN)&&console.trace},t}(),an=function rr(t){void 0===t&&(t={});var e=t.prefix,n=void 0===e?"PAOCOM_SDK":e;this.logger=new rn({prefix:n})},cn=function(n){function t(t){void 0===t&&(t={});var e=this;return e._options=t,(e=n.call(this)||this).init(),e}return r(t,n),t.prototype.init=function(){},t}(an),un={},sn=navigator.userAgent.toLowerCase(),ln=sn.match(/trident/),fn=!ln&&sn.match(/(ipad).*os\s([\d_]+)/),dn=!ln&&!fn&&sn.match(/(iphone\sos)\s([\d_]+)/),pn=sn.match(/(Android)\s+([\d.]+)/);un.IE11=/rv\:11/.test(sn),un.IE=/msie/.test(sn)||un.IE11,un.OPERA=/opera/.test(sn),un.MOZ=/gecko/.test(sn),un.IE6=/msie 6/.test(sn),un.IE7=/msie 7/.test(sn),un.IE8=/msie 8/.test(sn),un.IE9=/msie 9/.test(sn),un.IE10=/msie 10/.test(sn),un.EDGE=/edge/.test(sn),un.Win=/windows/.test(sn),un.Mac=/mac/.test(sn),un.iPhone=/iphone os/.test(sn)&&!ln,un.iPad=/ipad/.test(sn)&&!ln,un.android=/android/.test(sn),un.WP=/windows phone/.test(sn),un.SAFARI=/safari/.test(sn)&&!/chrome/.test(sn),un.mobileSafari=(/iPhone/i.test(navigator.platform)||/iPod/i.test(navigator.platform)||/iPad/i.test(navigator.userAgent))&&!!navigator.appVersion.match(/(?:Version\/)([\w\._]+)/),un.WEBKIT=/webkit/.test(sn),un.CHROME=/chrome/.test(sn),un.iPod=/iPod/i.test(sn)&&!ln,un.iPhone4=/iphone os [45]_/.test(sn)&&!ln,un.pad=/pad/i.test(sn),un.phone=un.iPhone||un.android||un.WP,un.baidu=/baidu/.test(sn),un.mbaidu=/baidu/.test(sn),un.m360=/360/.test(sn),un.muc=/uc/.test(sn),un.mqq=/qq/.test(sn),pn&&(un.version=pn[2]),dn&&(un.ios=!0,un.version=dn[2].replace(/_/g,".")),fn&&(un.ios=!0,un.version=fn[2].replace(/_/g,".")),un.iPod&&(un.ios=!0),un.lePad=/lepad_hls/.test(sn),un.Mac=/macintosh/.test(sn),un.TT=/tencenttraveler/.test(sn),un.$360=/360se/.test(sn),un.ff=/firefox/.test(sn),un.uc=/uc/.test(sn),un.Maxthon=!1,un.PC=function ir(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!0,o=0;o<e.length;o++)if(0<t.indexOf(e[o])){n=!1;break}return n}();var hn=un;function mn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){for(var o=t.className,r=0,i=e;r<i.length;r++){var a=i[r];(a=String(a||"").trim())&&!bn(t,a)&&(o=o+" "+a)}t.className=o}}function vn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){for(var o=0,r=e;o<r.length;o++){var i=r[o];t.appendChild(i)}return t}}function yn(t,e,n){if(t&&e){var o=e.split(" ");if(t.addEventListener)for(var r=0,i=o;r<i.length;r++){var a=i[r];t.addEventListener(a,n,!1)}else if(t.attachEvent)for(var c=0,u=o;c<u.length;c++){var s=u[c];t.attachEvent("on"+s,n)}else for(var l=0,f=o;l<f.length;l++){t["on"+f[l]]=n}}}function gn(t){void 0===t&&(t="");var e=document.createElement("div");return e.innerHTML=t,ze(e.children)||[]}function bn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=[];t&&t.className&&(o=t.className.split(/\s+/));for(var r=0,i=e;r<i.length;r++){var a=i[r];if((a=String(a||"").trim())&&0<=o.indexOf(a))return!0}return!1}function wn(t){return t&&t.parentNode&&t.parentNode.removeChild(t),t}function _n(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){var o=t.className&&t.className.split(/\s+/)||"",r=o&&o.length||0;if(r){for(var i=0,a=e;i<a.length;i++){var c=a[i];c=String(c).trim();for(var u=0;u<r;u++)c==o[u]&&(o.splice(u,1),u--,r--)}t.className=o.join(" ")}}}function In(t,e,n){if(!t)throw new Error("The element is required.");if(!e)throw new Error("The event type is required.");t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function En(t,e,n){void 0===n&&(n=0);var o=t.getBoundingClientRect(),r=e&&e.getBoundingClientRect().top||window.innerHeight||document.documentElement.clientHeight,i=e&&e.getBoundingClientRect().left||window.innerWidth||document.documentElement.clientWidth;return o.top<=r+n&&o.left<=i&&o.bottom>=0-n&&0<=o.right}var Pn=new(function(){function t(t){void 0===t&&(t={}),this._options=t,this._listeners=t.listeners||{}}return t.prototype.subscribe=function(t,e){if(!t||"string"!=typeof t)throw new Error('The argument "name" is required.');if(!e||"function"!=typeof e)throw new Error('The argument "handler" must be a function.');this._listeners[t]&&Qe(this._listeners[t])?this._listeners[t].push(e):this._listeners[t]=[e]},t.prototype.publish=function(t,e){if(t&&"string"==typeof t&&this._listeners[t])for(var n=0,o=this._listeners[t];n<o.length;n++){var r=o[n];if(r&&"function"==typeof r)try{r.call(undefined,{event:t,data:e})}catch(i){}}},t.prototype.unSubscribe=function(t,e){if(t&&"string"==typeof t&&Qe(this._listeners[t]))for(var n=this._listeners[t],o=n.length,r=0;r<o;r++)e===n[r]&&(n.splice(r,1),r--,o--)},t}()),Sn="//pcw-api.iqiyi.com/passport/user/userinfodetail?version=1",On="//sns-comment.iqiyi.com/v3/comment/getAccessToken.action",xn="//control.i.iqiyi.com/control/content_config",jn="//control-i.iqiyi.com/control/content_config";function An(t,e){return void 0===e&&(e=He),null==t||Be(t)?t:Le(t)?Ve(t,e):Ze(t,e)}function kn(t,o){void 0===o&&(o=He);var r=[];return An(t,function(t,e,n){r.push(o(t,e,n))}),r}function Cn(t){return String(t).replace(/[#%&+=\/\\\ \u3000\f\r\n\t]/g,function(t){return"%"+(256+t.charCodeAt()).toString(16).substring(1).toUpperCase()})}function Tn(n,o){void 0===n&&(n={}),void 0===o&&(o=Cn);var r=[],t=tn(n);return t&&t.length&&(t.sort(),An(t,function(e){var t=n[e];Qe(t)?r.push(kn(t,function(t){return e+"="+o(t)}).join("&")):r.push(e+"="+o(t))})),"string"==typeof n?n:r.join("&")}function qn(t,e,n){if(t=String(t||"")){var o=Tn(e,n);0<=t.lastIndexOf("?")?t+=o:t=t+"?"+o}return t}function Fn(t){return"string"!=typeof t?t:t.replace(".qiyipic.com",".iqiyipic.com")}function Rn(t,e){var n=new RegExp("(^|&|\\?|#)"+function r(t){return String(t).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1")}(e)+"=([^&#]*)(&|$|#)",""),o=t.match(n);return o?o[2]:""}var Nn={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function Wn(t){try{delete window[t]}catch(e){window[t]=undefined}}function $n(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}function Dn(a,c){void 0===c&&(c={});var u,s=a,l=c.timeout||Nn.timeout,f=c.jsonpCallback||Nn.jsonpCallback,d=Tn(c.data||{});return new Te(function(e,t){var n=c.jsonpCallbackFunction||function i(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}(),o=f+"_"+n;window[n]=function(t){e({ok:!0,json:function(){return Te.resolve(t)}}),u&&clearTimeout(u),$n(o),Wn(n)},s+=-1===s.indexOf("?")?"?":"&",d&&(s+=d+"&");var r=document.createElement("script");r.setAttribute("src",""+s+f+"="+n),c.charset&&r.setAttribute("charset",c.charset),r.id=o,document.getElementsByTagName("head")[0].appendChild(r),u=setTimeout(function(){t(new Error("JSONP request to "+a+" timed out")),Wn(n),$n(o),window[n]=function(){Wn(n)}},l),r.onerror=function(){t(new Error("JSONP request to "+a+" failed")),Wn(n),$n(o),u&&clearTimeout(u)}})}function Mn(t){var e=document.createElement("b");return e.innerHTML="\x3c!--[if IE "+t+"]><i></i><![endif]--\x3e",1<=e.getElementsByTagName("i").length}var Qn=Mn(8),Ln=Mn(9),Bn=5e3,Un="get",Hn="json";function Jn(t,e,n){void 0===e&&(e={}),void 0===n&&(n=null);var o=e.dataType,r=void 0===o?Hn:o,i=e.method,a=void 0===i?Un:i,c=(e.cors,e.data),u=void 0===c?{}:c;return"jsonp"==r?function s(t,e,n){return void 0===e&&(e={}),Dn(t,e).then(function(t){return t.json()}).then(function(t){return n&&n(t),t})}(t,e,n):(e.method=a=a.toLowerCase(),"get"===a&&(t=qn(t)),e.data=Tn(u),Qn||Ln?function l(e,t,i){if(void 0===t&&(t={}),void 0===i&&(i=null),window.XDomainRequest){var n=Un,o=t.timeout,a=void 0===o?Bn:o,r=t.data,c=void 0===r?"":r;return new Te(function(o,t){var r=new XDomainRequest;e=qn(e,c),r.onerror=function(){var t={detail:"XDR occurs some errors!"};o(t),Be(i)&&i(t)},r.ontimeout=function(){var t={detail:"XDR timeout!"};o(t),Be(i)&&i(t)},r.onprogress=function(){},r.onload=function(){var t=r.responseText||"",e={};try{e=JSON.parse(t)}catch(n){e.detail=JSON.stringify(n)}o(e),"function"==typeof i&&i(e)},r.timeout=a,r.open(n,e),r.send(c)})}throw Error("Your browser doesn't support XDomainRequest!")}(t,e,n):function p(i,a,c){void 0===a&&(a={});var t=a.method,u=void 0===t?Un:t,e=a.timeout,s=void 0===e?Bn:e,n=a.data,l=void 0===n?{}:n,o=a.headers,f=void 0===o?{}:o,d=(a.dataType,"");return u=u.toLowerCase(),new Te(function(n,t){var o=new XMLHttpRequest;o.withCredentials=a.withCredentials||!1,"get"===u?i=qn(i,l):d=Tn(l),o.open(u,i,!0),o.timeout=s,o.onreadystatechange=function(){if(4==o.readyState){var t={};try{t=JSON.parse(o.responseText)}catch(e){t={detail:JSON.stringify(e)}}"function"==typeof c&&c(t),n(t)}},o.ontimeout=function(){var t={detail:"XHR timeout!"};Be(c)&&c(t),n(t)};var e=!(o.onerror=function(){var t={detail:"XHR occurs errors!"};Be(c)&&c(t),n(t)});for(var r in f)"content-type"===r.toLowerCase()&&(e=!0),o.setRequestHeader(r,f[r]);e||o.setRequestHeader("content-type","application/x-www-form-urlencoded"),o.send(d)})}(t,e,n))}var Vn=Object.freeze({SUCCESS:"A00000",LOCAL_FAIL:"E00000"});function Xn(t,e,n){return void 0===e&&(e={}),void 0===n&&(n=null),Jn(t,e,n).then(function(t){return function o(n){if("string"==typeof n)return Fn(n.replace(/^http:|^https:/,""));kn(n,function(t,e){"object"==typeof t&&null!==t?o(t):"string"==typeof t&&(n[e]=Fn(t.replace(/^http:|^https:/,"")))})}(t),t})["catch"](function(t){return{detail:JSON.stringify(t),code:Vn.LOCAL_FAIL}})}var zn=function(n){function t(t){void 0===t&&(t={});var e=this;return e._options=t,(e=n.call(this)||this).init(),e}return r(t,n),t.prototype.init=function(){},t.prototype.get=function(t,e,n){return void 0===e&&(e={}),Xn(t,{data:e,method:"get"}).then(function(t){return n&&n(t),t})},t.prototype.jsonp=function(t,e,n){return void 0===e&&(e={}),Xn(t,{data:e,dataType:"jsonp"},n)},t.prototype.post=function(t,e,n){return void 0===e&&(e={}),Xn(t,{data:e,method:"post"},n)},t}(an),Yn=function(t){if(n=t,new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(n)){var e=new RegExp("(^| )"+t+"=([^;]*)(;|$)").exec(document.cookie);if(e)return e[2]||null}var n;return null},Gn=function(t){var e=Yn(t);return"string"==typeof e?e=decodeURIComponent(e):null};navigator.userAgent.toLowerCase();var Kn={11:"QC005",21:"QC006",31:"QC006"},Zn=new(function(){function t(){this.userInfo=null}return t.prototype.isLogin=function(){return""!==Gn("P00002")&&null!==Gn("P00002")&&"deleted"!==Gn("P00002")&&""!==Gn("P00003")&&null!==Gn("P00003")&&"deleted"!==Gn("P00003")},t.prototype.getSubAuthCookies=function(){var t=Gn("P00007");return"deleted"===t&&(t=""),t},t.prototype.getAuthCookies=function(){var t=Gn("P00001");return"deleted"===t&&(t=""),t},t.prototype.getUid=function(){var t=Gn("P00002"),e="";return null!==t&&""!==t&&(e=(t=window.JSON?window.JSON.parse(t):"").uid),e},t.prototype.getNickName=function(){var t=Gn("P00002"),e="";return null!==t&&""!==t&&(e=(t=window.JSON?window.JSON.parse(t):"").nickname),e},t.prototype.getCuid=function(t){return t?Gn(Kn[t]):this.getCuid(function e(){return hn.pad?21:hn.phone?31:11}())},t.prototype.checkUserInfo=function(){if(isLogin()){var t=Q.cookie.get("P00002");null!==t&&""!==t&&(t=window.JSON?window.JSON.parse(t):"")}},t.prototype.getIcon=function(){return i(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return e=Gn("QC179"),"",null===e||""===e?[3,1]:(e=window.JSON?window.JSON.parse(e):"",[2,e.userIcon]);case 1:return this.userInfo?[3,3]:[4,(n=this).getInfoFromInterface()];case 2:return n.userInfo=t.sent(),[2,this.userInfo.currentUser.icon];case 3:return[2,this.userInfo.currentUser.icon]}})})},t.prototype.getUserInfo=function(){return i(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return this.userInfo?[3,2]:[4,(e=this).getInfoFromInterface()];case 1:return e.userInfo=t.sent(),[2,this.userInfo.userInfo];case 2:return[2,this.userInfo.userInfo]}})})},t.prototype.getInfoFromInterface=function(){return i(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return this.isLogin()?[4,Xn(Sn,{dataType:"jsonp"})]:[2];case 1:return e=t.sent(),[2,this._formatUserInfo(e.data)]}})})},t.prototype._formatUserInfo=function(t){if(!t)return{};Gn("P00PRU");var e=t.userInfo;return t.currentUser=Ke({},e||t.userInfo),t},t}()),to=function(t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o={indexOf:function(t){return t.charCodeAt(0)},charAt:String.fromCharCode};function r(t,e,n,o,r,i){var a,c,u,s=0,l="",f=1,d=1,p=(t=String(t)).length;for(a=0;a<p||!e&&1<d;a+=1){if(s*=r,f*=r,a<p){if((c=n.indexOf(t.charAt(a)))<=-1||r<=c)throw new RangeError;d*=r,s+=c}for(;i<=f;)f/=i,1<d&&(u=s,s%=f,l+=o.charAt((u-s)/f),d/=i)}return l}return t.btoa=function(t){return(t=r(t,!1,o,n,256,64))+"====".slice(t.length%4||4)},t.atob=function(t){var e;for(e=(t=String(t).split("=")).length-1;0<=e;e-=1){if(t[e].length%4==1)throw new RangeError;t[e]=r(t[e],!0,n,o,64,256)}return t.join("")},t}({}),eo=new(function(n){function t(t){void 0===t&&(t={});var e=this;return e.configs={inputBoxEnable:!0,fakeWriteEnable:!0,contentDisplayEnable:!0},e=n.call(this,t)||this}return r(t,n),t.prototype.init=function(){this.qitan=document.querySelector("#qitancommonarea"),this.pageInfo=Q.PageInfo&&Q.PageInfo.playPageInfo||{},this._tvId=this.pageInfo.tvId,this._vid=this.pageInfo.vid,this._albumId=this.pageInfo.albumId||this.pageInfo.liveType,this._categoryId=this.pageInfo.cid,this._commentAllowed=this.pageInfo.commentAllowed||"0",this._sourceId=this.pageInfo.sourceId||"0",this._pageType=this.pageInfo.pageType||"",this.pageInfo.branchId&&(this._tvId=this.pageInfo.branchId),this.curVideo={},this.curTvid=null;var t=decodeURIComponent(location.href);this.curTvid=Rn(t,"l"),this.curTvid&&(this.curTvid=this.curTvid.replace("/",""))},t.prototype._getParam=function(){var t={};if(this.qitan){var e=this._tvId||this.curTvid||this.qitan.getAttribute("data-qitancomment-tvid")||this._playerTvId||"",n=this.qitan.getAttribute("data-qitancomment-qitanid"),o=this._categoryId||this.qitan.getAttribute("data-qitancomment-categoryid"),r=this.qitan.getAttribute("data-qitancomment-title"),i=this.qitan.getAttribute("data-qitancomment-tvyear"),a=this.qitan.getAttribute("data-qitancomment-playorder"),c=this._albumId||this.pageInfo.liveType||this.qitan.getAttribute("data-qitancomment-albumid"),u=this._pageType||"",s=this._commentAllowed||"0",l=this._sourceId||0,f=this.qitan.getAttribute("id"),d=this.qitan.getAttribute("data-qitancomment-type"),p=this._vid||"";t={cmdid:f,commentAllowed:s,tvid:e||"0",qitanid:n||"0",categoryid:o||"0",qitan_comment_type:d||"0",title:r||"",playurl:location.href||"",tv_year:i||"0",play_order:a||"0",albid:c||"0",pageType:u,vrs_album_id:c||"0",sourceId:l,vid:p||""}}return t},t.prototype.getQitanParam=function(){return this._getParam()},t.prototype.getContentId=function(){return Rn(window.location.href,"comment_id").split("_")[0]},t.prototype.getType=function(){return Rn(window.location.href,"comment_id").split("_")[1]},t.prototype.getTvId=function(){return this._tvId||""},t.prototype.getAlbumId=function(){return this._albumId||""},t.prototype.setAlbumId=function(t){this._albumId=t||0},t.prototype.setTvId=function(t){this._tvId=t||0},t.prototype.setVid=function(t){this._vid=t||""},t.prototype.setPlayerTvid=function(t){this._playerTvId=t||0},t.prototype.setCommentAllowed=function(t){this._commentAllowed=t||!1},t.prototype.setCid=function(t){this._categoryId=t},t.prototype.getQitanControl=function(r){return i(this,void 0,void 0,function(){var e,n,o;return c(this,function(t){switch(t.label){case 0:return r=r||{},e=this._getParam(),n={business:"comment",is_iqiyi:!0,is_video_page:!0,tvid:r.tvid||e.tvid,albumid:r.albumid||e.albid,categoryid:r.categoryid||e.categoryId||"",sourceid:r.sourceId||e.sourceId||0,qypid:"01010011010000000000",rpage:to.btoa(window.location.href.split("?")[0].split("#")[0]||""),block:"I",s2:to.btoa(document.referrer.split("?")[0].split("#")[0]||""),uid:Zn.getUid()||0,version:"1.0.0"},o=null,"https:"!==location.protocol?[3,2]:[4,this.jsonp(jn,n)];case 1:return o=t.sent(),[3,4];case 2:return[4,this.jsonp(xn,n)];case 3:o=t.sent(),t.label=4;case 4:return"A00000"===o.code&&o.data&&(this.configs={likeEnable:o.data.likeEnable,inputBoxEnable:o.data.inputBoxEnable,fakeWriteEnable:o.data.fakeWriteEnable,contentDisplayEnable:o.data.contentDisplayEnable,auditStrategyEnable:o.data.auditStrategyEnable}),[2,this.configs]}})})},t.prototype.getQitanControls=function(){return this.configs},t}(zn)),no="//pcw-api.iqiyi.com/video/video/baseinfo/",oo="http://control.i.iqiyi.com/control/content_config",ro="https://control-i.iqiyi.com/control/content_config",io=new(function(n){function t(t){void 0===t&&(t={});var e=this;return e.configs={inputBoxEnable:!0,fakeWriteEnable:!0,contentDisplayEnable:!0},e.playPageInfo=Q.PageInfo&&Q.PageInfo.playPageInfo||{},e.wallId=e.playPageInfo.wallId||"",e.jujiWallId=e.wallId,e.jujiWallIds=e.jujiWallId?[e.jujiWallId]:[],e.curWallId=e.wallId||"",e.shallScroll=!1,e.tvid=e.playPageInfo.tvid||e.playPageInfo.tvId||"",e.albumid=e.playPageInfo.albumId||"",e.categoryid=e.playPageInfo.cid||"",e.newMsg=!1,e=n.call(this,t)||this}return r(t,n),t.prototype._update=function(){return i(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this._updateFromInter()];case 1:return e=t.sent(),Pn.publish({type:"paoControl_update",data:this._getConfigs()}),[2,e]}})})},t.prototype._updateFromInter=function(){return i(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return e={business:"paopao_wall",qypid:"01010011010000000000",tvid:this.getTvid(),albumid:this.getAlbumId(),categoryid:this.getCategoryId(),wallId:this.getWallId(),is_iqiyi:!0,rpage:to.btoa(window.location.href.split("?")[0].split("#")[0]||""),block:"I",s2:to.btoa(document.referrer.split("?")[0].split("#")[0]||""),uid:Zn.getUid()||0,version:"1.0.0"},n=null,"https:"!==location.protocol?[3,2]:[4,this.jsonp(ro,e)];case 1:return n=t.sent(),[3,4];case 2:return[4,this.jsonp(oo,e)];case 3:n=t.sent(),t.label=4;case 4:return"A00000"===n.code&&this._setConfigs(n.data),[2,this._getConfigs()]}})})},t.prototype._setConfigs=function(t){this.configs={inputBoxEnable:t.inputBoxEnable,fakeWriteEnable:t.fakeWriteEnable,paopaoWall:t.paopaoWall}},t.prototype._getConfig=function(t){return t?this.configs[t]:null},t.prototype._getConfigs=function(){return this.configs},t.prototype.getWallId=function(){return this.wallId||""},t.prototype.setWallId=function(t){this.wallId=t||""},t.prototype.getJujiWallId=function(){return this.jujiWallId||""},t.prototype.getJujiWallIds=function(){return this.jujiWallIds||[]},t.prototype.setJujiWallId=function(t){t&&"0"!=t&&t!=this.jujiWallId&&this.jujiWallIds.push(t),this.jujiWallId=t||""},t.prototype.getCurWallId=function(){return this.curWallId||""},t.prototype.setCurWallId=function(t){t=t||"",this.curWallId=t},t.prototype.setTvid=function(t){t=t||"",this.tvid=t},t.prototype.getTvid=function(){return this.tvid||""},t.prototype.setAlbumId=function(t){t=t||"",this.albumid=t},t.prototype.getAlbumId=function(){return this.albumid||""},t.prototype.setCategoryId=function(t){t=t||"",this.categoryid=t},t.prototype.getCategoryId=function(){return this.categoryid||""},t.prototype.getInputBoxEnable=function(){return this._getConfig("inputBoxEnable")},t.prototype.getFakeWriteEnable=function(){return this._getConfig("fakeWriteEnable")},t.prototype.getPaopaoWall=function(){return this._getConfig("paopaoWall")},t.prototype.getAllConfigs=function(){return this._getConfigs()},t.prototype.update=function(){return this._update()},t.prototype.updateFromInter=function(){return this._updateFromInter()},t.prototype.getDefaultConfigs=function(){return{inputBoxEnable:!0,fakeWriteEnable:!0,paopaoWall:!0}},t}(zn)),ao=e(function(t,e){"undefined"!=typeof self&&self,t.exports=function(n){function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}var r={};return o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=6)}([function(e,t,n){(function(t){e.exports=!1;try{e.exports="[object process]"===Object.prototype.toString.call(t.process)}catch(n){}}).call(t,n(4))},function(t,e,n){var f=n(8),d=n(3),p=n(23),h=function(t,e){e.onerror(t,e);var n=function(){return"{Template Error}"};return n.mappings=[],n.sourcesContent=[],n},o=function m(t){var n=1<arguments.length&&arguments[1]!==undefined?arguments[1]:{};"string"!=typeof t?n=t:n.source=t,n=d.$extend(n),t=n.source,!0===n.debug&&(n.cache=!1,n.minimize=!1,n.compileDebug=!0),n.compileDebug&&(n.minimize=!1),n.filename&&(n.filename=n.resolveFilename(n.filename,n));var e=n.filename,o=n.cache,r=n.caches;if(o&&e){var i=r.get(e);if(i)return i}if(!t)try{t=n.loader(e,n),n.source=t}catch(l){var a=new p({name:"CompileError",path:e,message:"template not found: "+l.message,stack:l.stack});if(n.bail)throw a;return h(a,n)}var c=void 0,u=new f(n);try{c=u.build()}catch(a){if(a=new p(a),n.bail)throw a;return h(a,n)}var s=function(t,e){try{return c(t,e)}catch(a){if(!n.compileDebug)return n.cache=!1,n.compileDebug=!0,m(n)(t,e);if(a=new p(a),n.bail)throw a;return h(a,n)()}};return s.mappings=c.mappings,s.sourcesContent=c.sourcesContent,s.toString=function(){return c.toString()},o&&e&&r.set(e,s),s};o.Compiler=f,t.exports=o},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=/((['"])(?:(?!\2|\\).|\\(?:\r\n|[\s\S]))*(\2)?|`(?:[^`\\$]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{[^}]*\}?)*\}?)*(`)?)|(\/\/.*)|(\/\*(?:[^*]|\*(?!\/))*(\*\/)?)|(\/(?!\*)(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\]\\]).|\\.)+\/(?:(?!\s*(?:\b|[\u0080-\uFFFF$\\'"~({]|[+\-!](?!=)|\.?\d))|[gmiyu]{1,5}\b(?![\u0080-\uFFFF$\\]|\s*(?:[+\-*%&|^<>!=?({]|\/(?![\/*])))))|(0[xX][\da-fA-F]+|0[oO][0-7]+|0[bB][01]+|(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?)|((?!\d)(?:(?!\s)[$\w\u0080-\uFFFF]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+)|(--|\+\+|&&|\|\||=>|\.{3}|(?:[+\-\/%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2})=?|[?~.,:;[\](){}])|(\s+)|(^$|[\s\S])/g,e.matchToToken=function(t){var e={type:"invalid",value:t[0]};return t[1]?(e.type="string",e.closed=!(!t[3]&&!t[4])):t[5]?e.type="comment":t[6]?(e.type="comment",e.closed=!!t[7]):t[8]?e.type="regex":t[9]?e.type="number":t[10]?e.type="name":t[11]?e.type="punctuator":t[12]&&(e.type="whitespace"),e}},function(t,e,n){function o(){this.$extend=function(t){return a(t=t||{},t instanceof o?t:this)}}var r=n(0),i=n(12),a=n(13),c=n(14),u=n(15),s=n(16),l=n(17),f=n(18),d=n(19),p=n(20),h=n(22),m={source:null,filename:null,rules:[d,f],escape:!0,debug:!!r&&"production"!==process.env.NODE_ENV,bail:!0,cache:!0,minimize:!0,compileDebug:!1,resolveFilename:h,include:c,htmlMinifier:p,htmlMinifierOptions:{collapseWhitespace:!0,minifyCSS:!0,minifyJS:!0,ignoreCustomFragments:[]},onerror:u,loader:l,caches:s,root:"/",extname:".art",ignore:[],imports:i};o.prototype=m,t.exports=new o},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(o){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){},function(t,e,n){var o=n(7),r=n(1),i=n(24),a=function(t,e){return e instanceof Object?o({filename:t},e):r({filename:t,source:e})};a.render=o,a.compile=r,a.defaults=i,t.exports=a},function(t,e,n){var o=n(1);t.exports=function(t,e,n){return o(t,n)(e)}},function(t,e,n){function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}(),r=n(9),w=n(11),_="$data",I="$imports",d="print",E="include",P="extend",p="block",S="$$out",O="$$line",x="$$blocks",h="$$slice",j="$$from",A="$$options",k=function(t,e){return Object.hasOwnProperty.call(t,e)},C=JSON.stringify,i=function(){function u(t){var e,n,o=this;f(this,u);var r=t.source,i=t.minimize,a=t.htmlMinifier;if(this.options=t,this.stacks=[],this.context=[],this.scripts=[],this.CONTEXT_MAP={},this.ignore=[_,I,A].concat(l(t.ignore)),this.internal=(s(e={},S,"''"),s(e,O,"[0,0]"),s(e,x,"arguments[1]||{}"),s(e,j,"null"),s(e,d,"function(){var s=''.concat.apply('',arguments);$$out+=s;return s}"),s(e,E,"function(src,data){var s="+A+".include(src,data||"+_+",arguments[2]||"+x+","+A+");"+S+"+=s;return s}"),s(e,P,"function(from){$$from=from}"),s(e,h,"function(c,p,s){p=$$out;$$out='';c();s=$$out;$$out=p+s;return s}"),s(e,p,"function(){var a=arguments,s;if(typeof a[0]==='function'){return "+h+"(a[0])}else if("+j+"){if(!"+x+"[a[0]]){"+x+"[a[0]]="+h+"(a[1])}else{"+S+"+="+x+"[a[0]]}}else{s="+x+"[a[0]];if(typeof s==='string'){"+S+"+=s}else{s="+h+"(a[1])}return s}}"),e),this.dependencies=(s(n={},d,[S]),s(n,E,[S,A,_,x]),s(n,P,[j,E]),s(n,p,[h,j,S,x]),n),this.importContext(S),t.compileDebug&&this.importContext(O),i)try{r=a(r,t)}catch(c){}this.source=r,this.getTplTokens(r,t.rules,this).forEach(function(t){t.type===w.TYPE_STRING?o.parseString(t):o.parseExpression(t)})}return o(u,[{key:"getTplTokens",value:function(){return w.apply(undefined,arguments)}},{key:"getEsTokens",value:function(t){return r(t)}},{key:"getVariables",value:function(t){var e=!1;return t.filter(function(t){return"whitespace"!==t.type&&"comment"!==t.type}).filter(function(t){return"name"===t.type&&!e||(e="punctuator"===t.type&&"."===t.value,!1)}).map(function(t){return t.value})}},{key:"importContext",value:function(t){var e=this,n="",o=this.internal,r=this.dependencies,i=this.ignore,a=this.context,c=this.options,u=c.imports,s=this.CONTEXT_MAP;k(s,t)||-1!==i.indexOf(t)||(k(o,t)?(n=o[t],k(r,t)&&r[t].forEach(function(t){return e.importContext(t)})):n="$escape"===t||"$each"===t||k(u,t)?I+"."+t:_+"."+t,s[t]=n,a.push({name:t,value:n}))}},{key:"parseString",value:function(t){var e=t.value;if(e){var n=S+"+="+C(e);this.scripts.push({source:e,tplToken:t,code:n})}}},{key:"parseExpression",value:function(t){var e=this,n=t.value,o=t.script,r=o.output,i=this.options.escape,a=o.code;r&&(a=!1===i||r===w.TYPE_RAW?S+"+="+o.code:S+"+=$escape("+o.code+")");var c=this.getEsTokens(a);this.getVariables(c).forEach(function(t){return e.importContext(t)}),this.scripts.push({source:n,tplToken:t,code:a})}},{key:"checkExpression",value:function(t){for(var e=[[/^\s*}[\w\W]*?{?[\s;]*$/,""],[/(^[\w\W]*?\([\w\W]*?(?:=>|\([\w\W]*?\))\s*{[\s;]*$)/,"$1})"],[/(^[\w\W]*?\([\w\W]*?\)\s*{[\s;]*$)/,"$1}"]],n=0;n<e.length;){if(e[n][0].test(t)){var o;t=(o=t).replace.apply(o,l(e[n]));break}n++}try{return new Function(t),!0}catch(f){return!1}}},{key:"build",value:function(){var t=this.options,e=this.context,n=this.scripts,i=this.stacks,o=this.source,r=t.filename,a=t.imports,c=[],u=k(this.CONTEXT_MAP,P),s=0,l=function(t,e){var n=e.line,o=e.start,r={generated:{line:i.length+s+1,column:1},original:{line:n+1,column:o+1}};return s+=t.split(/\n/).length-1,r},f=function(t){return t.replace(/^[\t ]+|[\t ]$/g,"")};i.push("function("+_+"){"),i.push("'use strict'"),i.push(_+"="+_+"||{}"),i.push("var "+e.map(function(t){return t.name+"="+t.value}).join(",")),t.compileDebug?(i.push("try{"),n.forEach(function(t){t.tplToken.type===w.TYPE_EXPRESSION&&i.push(O+"=["+[t.tplToken.line,t.tplToken.start].join(",")+"]"),c.push(l(t.code,t.tplToken)),i.push(f(t.code))}),i.push("}catch(error){"),i.push("throw {"+["name:'RuntimeError'","path:"+C(r),"message:error.message","line:$$line[0]+1","column:$$line[1]+1","source:"+C(o),"stack:error.stack"].join(",")+"}"),i.push("}")):n.forEach(function(t){c.push(l(t.code,t.tplToken)),i.push(f(t.code))}),u&&(i.push(S+"=''"),i.push(E+"("+j+","+_+","+x+")")),i.push("return "+S),i.push("}");var d=i.join("\n");try{var p=new Function(I,A,"return "+d)(a,t);return p.mappings=c,p.sourcesContent=[o],p}catch(b){for(var h=0,m=0,v=0,y=void 0;h<n.length;){var g=n[h];if(!this.checkExpression(g.code)){m=g.tplToken.line,v=g.tplToken.start,y=g.code;break}h++}throw{name:"CompileError",path:r,message:b.message,line:m+1,column:v+1,source:o,generated:y,stack:b.stack}}}}]),u}();i.CONSTS={DATA:_,IMPORTS:I,PRINT:d,INCLUDE:E,EXTEND:P,BLOCK:p,OPTIONS:A,OUT:S,LINE:O,BLOCKS:x,SLICE:h,FROM:j,ESCAPE:"$escape",EACH:"$each"},t.exports=i},function(t,e,n){var o=n(10),r=n(2)["default"],i=n(2).matchToToken;t.exports=function(t){return t.match(r).map(function(t){return r.lastIndex=0,i(r.exec(t))}).map(function(t){return"name"===t.type&&o(t.value)&&(t.type="keyword"),t})}},function(t,e,n){var o={"abstract":!0,await:!0,"boolean":!0,"break":!0,"byte":!0,"case":!0,"catch":!0,"char":!0,"class":!0,"const":!0,"continue":!0,"debugger":!0,"default":!0,"delete":!0,"do":!0,"double":!0,"else":!0,"enum":!0,"export":!0,"extends":!0,"false":!0,"final":!0,"finally":!0,"float":!0,"for":!0,"function":!0,"goto":!0,"if":!0,"implements":!0,"import":!0,"in":!0,"instanceof":!0,"int":!0,"interface":!0,"let":!0,"long":!0,"native":!0,"new":!0,"null":!0,"package":!0,"private":!0,"protected":!0,"public":!0,"return":!0,"short":!0,"static":!0,"super":!0,"switch":!0,"synchronized":!0,"this":!0,"throw":!0,"transient":!0,"true":!0,"try":!0,"typeof":!0,"var":!0,"void":!0,"volatile":!0,"while":!0,"with":!0,"yield":!0};t.exports=function(t){return o.hasOwnProperty(t)}},function(t,e,n){function y(t,e,n){this.type=t,this.value=e,this.script=null,n?(this.line=n.line+n.value.split(/\n/).length-1,this.line===n.line?this.start=n.end:this.start=n.value.length-n.value.lastIndexOf("\n")-1):(this.line=0,this.start=0),this.end=this.start+this.value.length}var o=function(t,e){for(var n=2<arguments.length&&arguments[2]!==undefined?arguments[2]:{},o=[new y("string",t)],r=0;r<e.length;r++)for(var i=e[r],a=i.test.ignoreCase?"ig":"g",c=new RegExp(i.test.source,a),u=0;u<o.length;u++){var s=o[u],l=o[u-1];if("string"===s.type){for(var f=void 0,d=0,p=[],h=s.value;null!==(f=c.exec(h));)f.index>d&&(l=new y("string",h.slice(d,f.index),l),p.push(l)),l=new y("expression",f[0],l),f[0]=(m=l,v=void 0,(v=new String(m.value)).line=m.line,v.start=m.start,v.end=m.end,v),l.script=i.use.apply(n,f),p.push(l),d=f.index+f[0].length;d<h.length&&(l=new y("string",h.slice(d),l),p.push(l)),o.splice.apply(o,[u,1].concat(p)),u+=p.length-1}}var m,v;return o};o.TYPE_STRING="string",o.TYPE_EXPRESSION="expression",o.TYPE_RAW="raw",o.TYPE_ESCAPE="escape",t.exports=o},function(o,t,r){(function(t){var e=r(0),n=Object.create(e?t:window),u=/["&'<>]/;n.$escape=function(t){return function c(t){var e=""+t,n=u.exec(e);if(!n)return t;var o="",r=void 0,i=void 0,a=void 0;for(r=n.index,i=0;r<e.length;r++){switch(e.charCodeAt(r)){case 34:a="&#34;";break;case 38:a="&#38;";break;case 39:a="&#39;";break;case 60:a="&#60;";break;case 62:a="&#62;";break;default:continue}i!==r&&(o+=e.substring(i,r)),i=r+1,o+=a}return i!==r?o+e.substring(i,r):o}(function e(t){return"string"!=typeof t&&(t=t===undefined||null===t?"":"function"==typeof t?e(t.call(t)):JSON.stringify(t)),t}(t))},n.$each=function(t,e){if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++)e(t[n],n);else for(var r in t)e(t[r],r)},o.exports=n}).call(t,r(4))},function(t,e,n){var a=Object.prototype.toString;(function c(t,e){var n,o=void 0,r=null===(n=t)?"Null":a.call(n).slice(8,-1);if("Object"===r?o=Object.create(e||{}):"Array"===r&&(o=[].concat(e||[])),o){for(var i in t)Object.hasOwnProperty.call(t,i)&&(o[i]=c(t[i],o[i]));return o}return t}),t.exports=function c(t,e){var n,o=void 0,r=null===(n=t)?"Null":a.call(n).slice(8,-1);if("Object"===r?o=Object.create(e||{}):"Array"===r&&(o=[].concat(e||[])),o){for(var i in t)Object.hasOwnProperty.call(t,i)&&(o[i]=c(t[i],o[i]));return o}return t}},function(t,e,i){t.exports=function(t,e,n,o){var r=i(1);return o=o.$extend({filename:o.resolveFilename(t,o),bail:!0,source:null}),r(o)(e,n)}},function(t,e,n){t.exports=function(t){}},function(t,e,n){var o={__data:Object.create(null),set:function(t,e){this.__data[t]=e},get:function(t){return this.__data[t]},reset:function(){this.__data={}}};t.exports=o},function(t,e,n){var o=n(0);t.exports=function(t){if(o)return n(5).readFileSync(t,"utf8");var e=document.getElementById(t);return e.value||e.innerHTML}},function(t,e,n){var d={test:/{{([@#]?)[ \t]*(\/?)([\w\W]*?)[ \t]*}}/,use:function(t,e,n,o){this.options;var r=this.getEsTokens(o),i=r.map(function(t){return t.value}),a={},c=void 0,u=!!e&&"raw",s=n+i.shift();switch(s){case"set":o="var "+i.join("").trim();break;case"if":o="if("+i.join("").trim()+"){";break;case"else":var l=i.indexOf("if");o=~l?(i.splice(0,l+1),"}else if("+i.join("").trim()+"){"):"}else{";break;case"/if":o="}";break;case"each":(c=d._split(r)).shift(),"as"===c[1]&&c.splice(1,1),o="$each("+(c[0]||"$data")+",function("+(c[1]||"$value")+","+(c[2]||"$index")+"){";break;case"/each":o="})";break;case"block":(c=d._split(r)).shift(),o="block("+c.join(",").trim()+",function(){";break;case"/block":o="})";break;case"echo":s="print";case"print":case"include":case"extend":if(0!==i.join("").trim().indexOf("(")){(c=d._split(r)).shift(),o=s+"("+c.join(",")+")";break}default:if(~i.indexOf("|")){var f=r.reduce(function(t,e){var n=e.value,o=e.type;return"|"===n?t.push([]):"whitespace"!==o&&"comment"!==o&&(t.length||t.push([]),":"===n&&1===t[t.length-1].length||t[t.length-1].push(e)),t},[]).map(function(t){return d._split(t)});o=f.reduce(function(t,e){var n=e.shift();return e.unshift(t),"$imports."+n+"("+e.join(",")+")"},f.shift().join(" ").trim())}u=u||"escape"}return a.code=o,a.output=u,a},_split:function(t){t=t.filter(function(t){var e=t.type;return"whitespace"!==e&&"comment"!==e});for(var e=0,n=t.shift(),o=/\]|\)/,r=[[n]];e<t.length;){var i=t[e];"punctuator"===i.type||"punctuator"===n.type&&!o.test(n.value)?r[r.length-1].push(i):r.push([i]),n=i,e++}return r.map(function(t){return t.map(function(t){return t.value}).join("")})}};t.exports=d},function(t,e,n){t.exports={test:/<%(#?)((?:==|=#|[=-])?)[ \t]*([\w\W]*?)[ \t]*(-?)%>/,use:function(t,e,n,o){return n={"-":"raw","=":"escape","":!1,"==":"raw","=#":"raw"}[n],e&&(o="/*"+o+"*/",n=!1),{code:o,output:n}}}},function(t,e,a){function c(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var u=a(0);t.exports=function(t,e){if(u){var n,o=a(21).minify,r=e.htmlMinifierOptions,i=e.rules.map(function(t){return t.test});(n=r.ignoreCustomFragments).push.apply(n,c(i)),t=o(t,r)}return t}},function(t,e){("object"==typeof t&&"object"==typeof t.exports?t.exports:window).noop=function(){}},function(t,e,u){var s=u(0),l=/^\.+\//;t.exports=function(t,e){if(s){var n=u(5),o=e.root,r=e.extname;if(l.test(t)){var i=e.filename,a=!i||t===i,c=a?o:n.dirname(i);t=n.resolve(c,t)}else t=n.resolve(o,t);n.extname(t)||(t+=r)}return t}},function(t,e,n){var o=function(t){function r(t){!function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var e=function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t.message));return e.name="TemplateError",e.message=function d(t){var e=t.name,n=t.source,o=t.path,r=t.line,i=t.column,a=t.generated,c=t.message;if(!n)return c;var u=n.split(/\n/),s=Math.max(r-3,0),l=Math.min(u.length,r+3),f=u.slice(s,l).map(function(t,e){var n=e+s+1;return(n===r?" >> ":"    ")+n+"| "+t}).join("\n");return(o||"anonymous")+":"+r+":"+i+"\n"+f+"\n\n"+e+": "+c+(a?"\n   generated: "+a:"")}(t),Error.captureStackTrace&&Error.captureStackTrace(e,e.constructor),e}return function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,t),r}(Error);t.exports=o},function(t,e,n){t.exports=n(3)}])}),co=function ar(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}(ao),uo=(ao.template,function(n){function t(t){void 0===t&&(t={});var e=this;return e._options=t,(e=n.call(this)||this).init(),e}return r(t,n),t.prototype.renderHtml=function(t,e){return co.compile(t)(e)},t.prototype.render=function(){},t.prototype.init=function(){},t.prototype.destroy=function(){},t.prototype.reset=function(){},t.prototype.showToast=function(t,e,n,o){o=o||"data-comment-feedback";var r=document.querySelector("["+o+'="'+t+'"]');r&&(n&&(r.style.position=n),r.querySelector("["+o+'="text"]').innerHTML=e,_n(r,"dn"),setTimeout(function(){mn(r,"dn")},1500))},t.prototype.hideToast=function(t){var e=document.querySelector('[data-comment-feedback="'+t+'"]');e&&mn(e,"dn")},t.prototype.showPaopaoToast=function(t,e,n){var o=document.querySelector('[data-paopao-ele="'+t+'"]');o&&(o.style.position=n?"fixed":"",o.querySelector('[data-paopao-ele="'+t+'Text"]').innerHTML=e,_n(o,"dn"),setTimeout(function(){mn(o,"dn")},1500))},t.prototype.showFloater=function(){_n(document.querySelector('[data-comment-ele="floater"]'),"dn")},t.prototype.hideFloater=function(){mn(document.querySelector('[data-comment-ele="floater"]'),"dn")},t.prototype.showPaopaoFloater=function(){_n(document.querySelector('[data-paopao-ele="floater"]'),"dn")},t.prototype.hidePaopaoFloater=function(){mn(document.querySelector('[data-paopao-ele="floater"]'),"dn")},t.prototype.scrollSmoothTo=function(e){window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){return setTimeout(t,17)});var n=document.documentElement.scrollTop||document.body.scrollTop,o=function(){var t=e-n;n+=t/5,Math.abs(t)<1?window.scrollTo(0,e):(window.scrollTo(0,n),requestAnimationFrame(o))};o()},t}(an)),so=function(e){function t(t){return void 0===t&&(t={}),e.call(this,t)||this}return r(t,e),t.prototype.getVideoInfo=function(t){return this.jsonp(no+t,{})},t}(zn);var lo=[],fo=null,po=function(t,e){"finger"==t?fo.getFingerPrint(function(t){e({code:"A00000",data:t})},function(t){e({code:"E00001"}),window.log("调用dfp.getFingerPrint失败"+t)}):"env"==t?fo.getEnvInfo(function(t){e({code:"A00000",data:t})},function(t){e({code:"E00001"}),window.log("调用dfp.getEnvInfo"+t)}):"envFinger"==t&&fo.getEnvAndDfp(function(t){e({code:"A00000",data:t})},function(t){e({code:"E00001"}),window.log("调用dfp.getEnvAndDfp"+t)})};function ho(){if(fo=window.dfp,0<lo.length)for(;0<lo.length;)try{var t=lo.shift();po(t.type,t.cb)}catch(e){window.log(e)}else fo.getFingerPrint(function(){}),fo.getEnvInfo(function(){})}if(window.dfp)ho();else if(window.qaLoadingDfp)window.qaLoadingDfp(ho);else{var mo="//security.iqiyi.com/static/cook/v1/cooksdk.js";hn.pad&&(mo="//security.iqiyi.com/static/cook/v1/cooksdkpcwpad.js"),function cr(t,e){var n=document.getElementsByTagName("HEAD").item(0),o=document.createElement("script");o.type="text/javascript",o.src=t,n.appendChild(o);var r=navigator.userAgent.toLowerCase();/msie/.test(r)?o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&e&&e()}:o.onload=function(){e&&e()}}(mo,function(){ho()})}var vo=new(function(){function t(){this.anomyMDevice="",this.atokenCache={},this._tvId="",this._vid="",this._albumId="",this._categoryId="",this._commentAllowed=!1}return t.prototype._getDfp=function(){var o=this;return new Te(function(e,t){!function n(t){fo?po("finger",t):lo.push({type:"finger",cb:t})}(function(t){"A00000"==t.code&&(o.anomyMDevice=t.data),e(o.anomyMDevice)})})},t.prototype.getAtoken=function(){return i(this,void 0,void 0,function(){var e,n,o;return c(this,function(t){switch(t.label){case 0:return e=Zn.getUid(),this.atokenCache[e]?[3,2]:(n=Zn.getAuthCookies(),[4,Jn(On,{dataType:"jsonp",data:{authcookie:n}})]);case 1:return"A00000"===(o=t.sent()).code&&o.data?(this.atokenCache[e]=o.data.access_token,[2,o.data.access_token]):[2,null];case 2:return[2,this.atokenCache[e]];case 3:return[2]}})})},t.prototype.getMDevice=function(){return i(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return this.anomyMDevice?[2,this.anomyMDevice]:[3,1];case 1:return[4,(e=this)._getDfp()];case 2:return e.anomyMDevice=t.sent(),[2,this.anomyMDevice]}})})},t.prototype.getWallId=function(){return((window.Q&&window.Q.PageInfo||{}).playPageInfo||{}).wallId||""},t.prototype.getTvId=function(){var t=(window.Q&&window.Q.PageInfo||{}).playPageInfo||{};return this._tvId||t.tvId||""},t.prototype.setTvId=function(t){this._tvId=t||""},t.prototype.getAlbumId=function(){return this._albumId||""},t.prototype.setAlbumId=function(t){this._albumId=t||0},t.prototype.setVid=function(t){this._vid=t||""},t.prototype.getVid=function(){return this._vid||""},t.prototype.setCommentAllowed=function(t){this._commentAllowed=t||!1},t.prototype.getCommentAllowed=function(){return this._commentAllowed},t.prototype.setCid=function(t){this._categoryId=t},t.prototype.getCid=function(){return this._categoryId},t}()),yo="//msg.qy.net/b";function go(u,s,l){return void 0===s&&(s="click"),void 0===l&&(l={}),i(this,void 0,void 0,function(){function e(){if("object"==typeof u)return u;var t=Gn("QC005"),e=Gn("P00003"),n=Q&&Q.PageInfo&&Q.PageInfo.playPageInfo&&Q.PageInfo.playPageInfo.videoTemplate,o=vo.getTvId(),r=vo.getAlbumId(),i={t:"click"===s?20:21,pf:1,p:hn.iPad?20:10,p1:101,p2:"1_10_101",bstp:"0",jsuid:t,u:t,pu:e,rn:function a(t){void 0===t&&(t=10);for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}(10),tmplt:n||"",tvid:o||Q&&Q.PageInfo&&Q.PageInfo.playPageInfo&&Q.PageInfo.playPageInfo.tvId||"",albumid:r||Q&&Q.PageInfo&&Q.PageInfo.playPageInfo&&Q.PageInfo.playPageInfo.albumId||""};return"click"===s?i.rseat=u:(i.block=u,i.v=(new Date).getFullYear()),n&&(i.tmplt=n),l.a&&(l.tvid=i.tvid,l.aid=i.albumid),Ke({},function c(){return window.pingbackParams&&"object"==typeof window.pingbackParams?window.pingbackParams:{}}(),i,l)}return c(this,function(t){return function i(t,e){if(void 0===e&&(e={}),"string"==typeof t){var n=new Image,o=[];try{An(tn(e),function(t){o.push(t+"="+encodeURIComponent(e[t]))})}catch(r){}try{n.src=t+"?"+o.join("&")}catch(r){}}}(yo,e()),[2]})})}var bo=!1,wo=!1,_o=!1,Io=!1,Eo=!1,Po='[data-widget-follow="related"]',So='[data-paopao-ele="changeCircleBtn"]',Oo='[data-paopao-ele="titleWrap"]',xo='[data-comment-ele="titleWrap"]',jo='[data-paopao-ele="relatedFixWrap"],[data-comment-ele="relatedFixWrap"]',Ao="#block-A .navPlayer",ko="#block-A .header-wrap",Co="#qitancommonarea",To="[data-paopao-tabline]",qo="csPpCircle_relatedIn_fix",Fo="dn",Ro="selected",No=function(n){function t(t){void 0===t&&(t={});var e=this;return e._container=t.container||document,e._configs=t.configs,e.wallId=io.getWallId()||e._configs.wallId||"",e.tvId=e._configs.tvId||"",e.ROLES=[],e._service=new so(t),e=n.call(this,t)||this}return r(t,n),t.prototype.init=function(){return i(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.fetchRoles()];case 1:return t.sent(),this.render(),this.addEvent(),this._bindEvents(),[2]}})})},t.prototype._bindEvents=function(){var s=this;An(Array.prototype.slice.call(this._container.querySelectorAll(So),0),function(u,t){yn(u,"click",function(t){!function c(t){t&&(t.preventDefault&&"_preventDefault"!=t.preventDefault.name?t.preventDefault():t.returnValue=!1)}(t);var e=u.getAttribute("data-paopao-channelid")||"",n=u.getAttribute("data-paopao-albumid")||"",o=u.getAttribute("data-paopao-tvid")||"",r=u.getAttribute("data-paopao-wallid")||"",i=u.getAttribute("data-star-id")||"",a={tvId:o,albumId:n,channelId:e,wallId:r,icon:u.querySelector("img").getAttribute("src")||"",starId:i};s.judgeAndFire(a)})})},t.prototype.addEvent=function(){var e=this;this._onReadyEvent(),Pn.subscribe("paopao_avatar_selected",function(t){e.judgeAndFire(t.data)})},t.prototype.judgeAndFire=function(t){var e=(t=t||{}).wallId||"",n=t.tvId=t.tvId||this.tvId||document.querySelector("#flashbox").getAttribute("data-player-tvid")||"";bo?e&&!wo&&this._fire(t):e&&this.wallId!=e&&!wo?this._fire(t):n&&this._fire(t)},t.prototype._fire=function(t){t=t||{},Pn.publish("circle_has_changed",t)},t.prototype.scrollTotitleBottom=function(){var t=this._container.querySelector(Oo);bo&&(t=this._container.querySelector(xo));var e=document.querySelector(Co),n=document.querySelector(Ao);n||(n=document.querySelector(ko));var o=45;t&&"fixed"===(window.getComputedStyle&&window.getComputedStyle(n,null).position||n.currentStyle.position)&&(o=n.offsetHeight-t.offsetHeight);var r=document.documentElement.scrollTop||document.body.scrollTop;document.documentElement.scrollTop=r+e.getBoundingClientRect().top-o,document.body.scrollTop=r+e.getBoundingClientRect().top-o},t.prototype.reset=function(e){return i(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return e=e||{},this.wallId=io.getWallId(),this.tvId=e.tvId||e.tvid||this.tvId,this.vid=e.vid,this.ROLES=[],[4,this.fetchRoles()];case 1:return t.sent(),this.render(),this._bindEvents(),[2]}})})},t.prototype.render=function(){var t=this._container.querySelector('[data-paopao-ele="relatedCircleList"]')||this._container.querySelector('[data-comment-ele="relatedCircleList"]');if(t){var e=this._options.renderDirection||0,n=gn(this.renderHtml('{{ each relatedCircles $value}}\n<li class="csPpCircle_related_item {{if $value.hasSelected}}selected{{/if}}" data-paopao-ele="changeCircleBtn" data-paopao-wallid="{{$value.wallId}}" data-star-id="{{$value.starId}}" data-paopao-channelid="{{$value.channelId}}" data-paopao-albumid="{{$value.albumId}}" data-paopao-tvid="{{$value.tvId}}"  {{if $index}} rseat="80521_commenting_star{{$index}}" {{else}} rseat="80521_commenting_jqtl" {{/if}}>\n    <div class="related_item_pic">\n        <img width="50" height="50" src="{{ $value.image }}" alt="" {{if $index}} rseat="80521_commenting_star{{$index}}" {{else}} rseat="80521_commenting_jqtl" {{/if}} class="related_pic">\n    </div>\n    <div class="related_item_tit">\n        <p class="related_item_name"><span class="related_name">{{ $value.text }}</span></p>\n    </div>\n    \x3c!-- <i class="related_item_tabline dn" data-paopao-tabline></i> --\x3e\n</li>\n{{ /each }}',{relatedCircles:this.ROLES}));t.innerHTML="",e?function o(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&(t.children.length?function a(t,e){for(var n=e.parentNode,o=0,r=t;o<r.length;o++){var i=r[o];n.insertBefore(i,e)}}(e,t.children[0]):vn.apply(void 0,[t].concat(e)))}.apply(void 0,[t].concat(n)):vn.apply(void 0,[t].concat(n)),2<=this.ROLES.length?this.show():this.hide()}},t.prototype._fetch=function(){var s=this,t=document.querySelector("#widget-star-recommend")||document.querySelector("#block-F");if(t&&"none"!=t.style.display&&"hidden"!=t.style.visibility){var e=t.querySelector(Po),n=e&&Array.prototype.slice.call(e.querySelectorAll("li"),0)||[];Xe(n,function(t,e){return"none"!=t.style.position&&"hidden"!=t.style.visibility}),An(n,function(t){for(var e=t.getAttribute("data-avatar-circleid")||"",n=t.getAttribute("data-avatar-id")||"",o=t.getAttribute("data-avatar-starwallstatus")||"",r=t.getAttribute("data-tab-text")||"",i=t.getAttribute("data-avatar-img")||t.querySelector("img").getAttribute("src")||"",a=!1,c={},u=0;u<s.ROLES.length;u++)if(s.ROLES[u].wallId==e){a=!0;break}"2"!=o||a||(c.wallId=e,c.wallStatus=o,c.text=r,c.image=i,c.starId=n,s.ROLES.push(c))});for(var o=!1,r=0;r<this.ROLES.length;r++){var i=this.ROLES[r];i.wallId==this.wallId?(i.hasSelected=!0,bo=!(o=!0)):i.hasSelected=!1}!o&&this.ROLES.length&&(this.ROLES[0].hasSelected=!0,this.ROLES[0].wallId?bo=!1:this.ROLES[0].tvId&&(bo=!0))}},t.prototype.fetchRoles=function(){return i(this,void 0,void 0,function(){var e,n,o,r,i,a;return c(this,function(t){switch(t.label){case 0:return this.tvId?[4,this._service.getVideoInfo(this.tvId)]:[3,2];case 1:e=t.sent(),n=e&&e.data||{},o=n.albumImageUrl||n.imageUrl||"",r=n.albumId||0,i=n.channelId||0,o&&(a=o.lastIndexOf("."),o=o.substring(0,a)+"_128_128"+o.substring(a)),this.ROLES=[{image:o,tvId:this.tvId,albumId:r,channelId:i,text:"评论",hasSelected:!1}],this._fetch(),this.judgeShow(),t.label=2;case 2:return[2]}})})},t.prototype.changeCircle=function(t){var e=(t=t||{}).wallId||"";(bo&&e&&!wo||!bo&&e&&this.wallId!=e&&!wo||!bo&&t.tvId)&&this._change(t)},t.prototype._change=function(t){var n=(t=t||{}).wallId||"",o=t.tvId||"",e=document.querySelector('[data-paopao-ele="relatedCircleList"]'),r=document.querySelector('[data-comment-ele="relatedCircleList"]'),i=e&&Array.prototype.slice.call(e.querySelectorAll(So),0)||[];An(i=i.concat(r&&Array.prototype.slice.call(r.querySelectorAll(So),0)||[]),function(t,e){_n(t,Ro),n?t.getAttribute("data-paopao-wallid")==n&&mn(t,Ro):o&&o&&t.getAttribute("data-paopao-tvid")==o&&mn(t,Ro)}),n?(bo=!1,this.wallId=n):o&&(bo=!0,this.wallId=""),wo=!0,this.showMask()},t.prototype.judgeCeiling=function(){var t=this._container.querySelector(jo),e=this._container.querySelector(To);if(document.documentElement.clientWidth<980||document.body.clientWidth<980)_n(t,qo);else{var n=this._container.querySelector(Oo),o=document.querySelector(Co);bo&&(n=this._container.querySelector(xo));var r=document.querySelector(ko);r||(r=document.querySelector(Ao));var i=0,a=n&&n.offsetHeight||36;"fixed"===(window.getComputedStyle&&window.getComputedStyle(r,null).position||r.currentStyle.position)&&(i=r.offsetHeight-a),o.getBoundingClientRect().top-i<0?(_n(e,Fo),mn(t,qo),Eo||go(bo?"708251_pltab":"705222_paopaotab","block"),Eo=!0):(Eo=!1,mn(e,Fo),_n(t,qo))}hn.pad&&mn(t,"csPpCircle_relatedIn_fix_ipad")},t.prototype.showMask=function(){_n(document.querySelector('[data-paopao-ele="loadingMask"]')||document.querySelector('[data-comment-ele="loadingMask"]'),Fo)},t.prototype.hideMask=function(){mn(document.querySelector('[data-paopao-ele="loadingMask"]')||document.querySelector('[data-comment-ele="loadingMask"]'),Fo)},t.prototype._onReadyEvent=function(){var e=this;Pn.subscribe("paopao_element_ready",function(t){"head"===(t=t.data||{}).area&&(_o=!0),"feed"===t.area&&(Io=!0),_o&&Io&&(e.hideMask(),_o=Io=wo=!1)})},t.prototype.judgeShow=function(){1<this.ROLES.length?this.show():this.hide()},t.prototype.show=function(){_n(this._container.querySelector('[data-paopao-ele="relatedFixOuterWrap"]')||this._container.querySelector('[data-comment-ele="relatedFixOuterWrap"]'),Fo)},t.prototype.hide=function(){mn(this._container.querySelector('[data-paopao-ele="relatedFixOuterWrap"]')||this._container.querySelector('[data-comment-ele="relatedFixOuterWrap"]'),Fo)},t}(uo),Wo=function(n){function t(t){void 0===t&&(t={});var e=this;return e._doms={},e._options=t,e.hasLoaded=!1,e=n.call(this,t)||this}return r(t,n),t.prototype.init=function(){var n=this;this._getDom(),this.hasLoaded||(this.hasLoaded=!0,this._doms.relatedCircles=new No(this._options),Pn.subscribe("reset_related_circles",function(t){n._doms.relatedCircles.reset(t&&t.data)}),Pn.subscribe("select_related_cricles",function(t){var e=t&&t.data||{};n._doms.relatedCircles.changeCircle(e)}))},t.prototype._getDom=function(){this._doms.comment=document.querySelector("#qitancommonarea")},t.prototype.fire=function(t,e){Pn.publish(t,e)},t.prototype.on=function(t,e){Pn.subscribe(t,e)},t}(uo),$o=((Q.PaoPaoInfo||{}).type,(Q.PageInfo||{}).playPageInfo||{}),Do=($o.albumId,$o.cid,$o.pageType,$o.wallId,$o.user&&$o.user.id||""),Mo="#qitancommonarea",Qo='[data-anchor-elem="comment"]',Lo='[data-wrap="paopao"]',Bo='[data-reloadbtn="loading"]',Uo="dn",Ho=null,Jo={},Vo=null,Xo=[],zo=!1,Yo=!1,Go=!1,Ko=function(n){function t(t){void 0===t&&(t={});var e=this;return e._doms={},e=n.call(this,t)||this}return r(t,n),t.prototype.init=function(){return i(this,void 0,void 0,function(){var e,n=this;return c(this,function(t){switch(t.label){case 0:return this._getDoms(),hn.IE6||hn.IE7||!this._doms.comment?[2]:(this._doms.qitan=gn('<div data-wrap="qitan"></div>'),vn(this._doms.comment,this._doms.qitan[0]),this._doms.paopao=gn('<div class="newStar-paopao-con" data-wrap="paopao"></div>'),vn(this._doms.comment,this._doms.paopao[0]),window.QiyiPlayerLoader&&window.QiyiPlayerLoader.ready(function(t){var e=t;e.constantType;(Ho=e.getPlayerById("flashbox")).getQiyiPlayerInfo(function(t){eo.setPlayerTvid(t.tvid||"")}),n._bindPlayerEvents()}),Vo=function(){n._judgeAndLoad()},[4,this._requestControl()]);case 1:return t.sent(),Go?this._doms&&this._doms.comment&&(wn(this._doms.comment.querySelector(Bo)),(e=document.querySelector('[qy-comment-wrap="skeleton"]'))&&wn(e)):(yn(window,"scroll",Vo),this._judgeAndLoad()),this._bindEvents(),[2]}})})},t.prototype._getDoms=function(){this._doms={comment:document.querySelector("#qitancommonarea")}},t.prototype._requestControl=function(){return i(this,void 0,void 0,function(){var e,n;return c(this,function(t){switch(t.label){case 0:return e=eo.getQitanParam(),n={},"1"!=e.commentAllowed?[3,2]:[4,eo.getQitanControl(e)];case 1:return n=t.sent(),Go=!n.contentDisplayEnable,[3,3];case 2:Go=!0,t.label=3;case 3:return[2,n]}})})},t.prototype._bindEvents=function(){},t.prototype._bindPlayerEvents=function(){var n=this;Ho&&Ho.on("videoChanged",function(t){var e=t&&t.data&&t.data.vi||{};n._switchVideo(e)})},t.prototype._setVideoParams=function(t){t&&!en(t)&&(eo.setAlbumId(t.aid||t.albumQipuId||""),eo.setTvId(t.tvid||t.tvId||""),eo.setVid(t.vid||""),eo.setCommentAllowed(t.commentAllowed||!1),eo.setCid(t.c||t.channelId||0))},t.prototype._switchVideo=function(r){return i(this,void 0,void 0,function(){var e,n,o;return c(this,function(t){switch(t.label){case 0:return(r=r||{})&&!en(r)&&r.tvid?(io.setJujiWallId(r.wallId||r.cirleId||r.circle&&r.circle.id||""),io.setWallId(""),io.setTvid(r.tvId||r.tvid),this._setVideoParams(r),"1"!=r.commentAllowed?[3,2]:(e=eo.getQitanParam(),[4,eo.getQitanControl(e)])):[3,3];case 1:return(n=t.sent())&&n.contentDisplayEnable?(Go=!1,o=Ke({},{configs:n},r),this._hidePaopao(),this._showQitan(),Pn.publish("reset_related_circles",o),Do=r.uid||"",this._initQitan()):(Go=!0,this._hideQitan()),[3,3];case 2:Go=!0,this._hidePaopao(),this._hideQitan(),t.label=3;case 3:return[2]}})})},t.prototype._firePao=function(t){1<Jo.paopao?(Pn.publish("select_related_cricles",t),Pn.publish("circle_has_selected",t)):Pn.publish("reset_related_circles",t)},t.prototype._fireQitan=function(t){1<Jo.qitan&&Pn.publish("select_related_cricles",t),this._qitanHasSelected()},t.prototype._switchCircle=function(r){return i(this,void 0,void 0,function(){var e,n,o=this;return c(this,function(t){switch(t.label){case 0:return!(r=r||{})||en(r)||Go?[3,5]:(e=eo.getQitanParam(),r.wallId?(io.setWallId(r.wallId),this._hideQitan(),"1"!=e.commentAllowed?[3,2]:[4,io.updateFromInter()]):[3,4]);case 1:return(n=t.sent())&&this._loadPaopao(r,n,function(){o._firePao(r),o._showPaopao()}),[3,3];case 2:this._hidePaopao(),t.label=3;case 3:return[3,5];case 4:r.tvId&&(io.setWallId(""),this._hidePaopao(),"1"==e.commentAllowed?this._loadQitan(function(){o._fireQitan(r),o._showQitan()}):this._hideQitan()),t.label=5;case 5:return[2]}})})},t.prototype._judgeAndLoad=function(){var t=document.querySelector(Mo),e=document.querySelector(Qo);(t&&En(t)||e&&En(e))&&(this._doms.comment&&_n(this._doms.comment,Uo),this._load())},t.prototype._load=function(){"1"==eo.getQitanParam().commentAllowed&&this._loadQitan()},t.prototype._loadPaopao=function(t,e,n){var o=this,r={};if(r=Ke({},{configs:{albumId:$o.albumId,cid:$o.categoryid||$o.cid,commentAllowed:$o.commentAllowed,qitanId:$o.qitanid,tvId:t.tvId,wallId:t.wallId,wallName:t.wallName,starId:t.starId,shortVideoPage:$o.shortVideoPage||0,yunkong:e},container:this._doms.paopao[0]},r),Jo.paopao)Jo.paopao++,this._paopao.reset(r),Yo=!1,this._showPaopao(),n&&Be(n)&&n();else if(!Yo){Yo=!0,o._removeLoading(),o._switchPaoQitan=new Wo(r),window.sdkPackManager.require("Paopao",function(t){Jo.paopao=1,o._paopao=t,Yo=!1,o.paopaoPlayer(),n&&n()},{business:"1",uri:"//static.iqiyi.com/js/paoQitan/paopao.2.0.1.js",config:r}),In(window,"scroll",Vo)}},t.prototype._hidePaopao=function(){this._doms&&this._doms.comment&&mn(this._doms.comment.querySelector(Lo),Uo)},t.prototype._showPaopao=function(){this._doms&&this._doms.comment&&_n(this._doms.comment.querySelector(Lo),Uo)},t.prototype._loadQitan=function(t){if(Jo.qitan)Jo.qitan++,this._showQitan(),t&&Be(t)&&t();else{if(Be(t)&&Xo.push(t),!zo)zo=!0,eo.getQitanControls().contentDisplayEnable?(this._showQitan(),this._initQitan()):(Go=!0,this._hide(this._doms.comment));In(window,"scroll",Vo)}},t.prototype._initQitan=function(t){t=t||{};var e=this,n=eo.getQitanParam(),o=eo.getQitanControls();if(this._qitanHasSelected(),(t=Ke({},{configs:{albumId:n.albid,cid:$o.categoryid||$o.cid,commentAllowed:n.commentAllowed,qitanId:n.qitanid,tvId:n.tvid,shortVideoPage:$o.shortVideoPage||0,yunkong:o,uploaderUid:Do},container:this._doms.qitan[0]},t)).container)if(t.container.innerHTML="",this._comment)for(this._comment.reset(t),zo=!1;Xo.length;)Xo.shift()();else window.sdkPackManager.require("Qitan",function(t){for(e._comment=t,Jo.qitan=1,zo=!1,e.qitanPlayer();Xo.length;)Xo.shift()()},{business:"1",uri:"//static.iqiyi.com/js/paoQitan/qitan.2.0.0.js",config:t});return Jo.qitan},t.prototype._qitanHasSelected=function(){Pn.publish("paopao_element_ready",{area:"feed"}),Pn.publish("paopao_element_ready",{area:"head"})},t.prototype._hideQitan=function(){this._hide(this._doms.qitan[0])},t.prototype._showQitan=function(){this._show(this._doms.comment),this._show(this._doms.qitan[0])},t.prototype._hide=function(t,e){t&&mn(t,e=e||Uo)},t.prototype._show=function(t,e){t&&_n(t,e=e||Uo)},t.prototype._removeLoading=function(){this._doms.comment&&wn(this._doms.comment.querySelector(Bo))},t.prototype.qitanPlayer=function(){this._comment&&(this._comment.on("comment_input",function(t){Ho&&Ho.pause()}),this._comment.on("comment_done",function(t){Ho&&Ho.resume()}))},t.prototype.paopaoPlayer=function(){this._paopao&&(this._paopao.on("paopao_input",function(t){Ho&&Ho.pause()}),this._paopao.on("paopao_done",function(t){Ho&&Ho.resume()}))},t.prototype.fire=function(t,e){Pn.publish(t,e)},t.prototype.on=function(t,e){Pn.subscribe(t,e)},t}(cn),Zo=document.getElementById("uniqy_sdkpack"),tr="sdkPackManager";Zo&&Zo.getAttribute("ns")&&(tr=Zo.getAttribute("ns"));var er=window[tr]||{},nr=function(t){var e;t.init&&(e=t.init),t.on&&t.on,t.un&&t.un,t.init=function(t){this.manager=er,"function"==typeof e&&e.call(this,t)},t.on=function(t,e){this.manager.event.on(t,e)},t.un=function(t,e){this.manager.event.un(tpye,e)},"function"==typeof er.define&&er.define("PaoQitan",t)}(Ko);t.comment=nr,Object.defineProperty(t,"__esModule",{value:!0})});